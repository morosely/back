<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="beanmapper.PosSaleGoodsOutModelMapper">
	<resultMap id="BaseResultMap" type="com.efuture.omdmain.model.out.PosSaleGoodsOutModel">
		<!-- WARNING - @mbg.generated -->
		<id column="ssgid" jdbcType="BIGINT" property="ssgid" />
		<result column="entId" jdbcType="BIGINT" property="entId" />
		<result column="shopId" jdbcType="BIGINT" property="shopId" />
		<result column="shopCode" jdbcType="VARCHAR" property="shopCode" />
		<result column="sgid" jdbcType="BIGINT" property="sgid" />
		<result column="goodsType" jdbcType="INTEGER" property="goodsType" />
		<result column="directFromErp" jdbcType="BIT" property="directFromErp" />
		<result column="singleItemFlag" jdbcType="BIT" property="singleItemFlag" />
		<result column="canSaleFlag" jdbcType="BIT" property="canSaleFlag" />
		<result column="parentGoodsCode" jdbcType="VARCHAR" property="parentGoodsCode" />
		<result column="goodsCode" jdbcType="VARCHAR" property="goodsCode" />
		<result column="goodsName" jdbcType="VARCHAR" property="goodsName" />
		<result column="goodsDisplayName" jdbcType="VARCHAR" property="goodsDisplayName" />
		<result column="skuCode" jdbcType="VARCHAR" property="skuCode" />
		<result column="barNo" jdbcType="VARCHAR" property="barNo" />
		<result column="salePrice" jdbcType="DECIMAL" property="salePrice" />
		<result column="escaleFlag" jdbcType="INTEGER" property="escaleFlag"/>
		<result column="prtDuplFlag" jdbcType="BOOLEAN" property="prtDuplFlag" />
		<result column="fullName" jdbcType="VARCHAR" property="fullName" />
		<result column="enSname" jdbcType="VARCHAR" property="enSname" />
		<result column="enFname" jdbcType="VARCHAR" property="enFname" />
		<result column="goodsFromCode" jdbcType="VARCHAR" property="goodsFromCode" />
		<result column="artNo" jdbcType="VARCHAR" property="artNo" />
		<result column="goodskindName" jdbcType="VARCHAR" property="goodskindName" />
		<result column="measureUnit" jdbcType="VARCHAR" property="measureUnit" />
		<result column="partsUnit" jdbcType="VARCHAR" property="partsUnit" />
		<result column="partsNum" jdbcType="REAL" property="partsNum" />
		<result column="categoryId" jdbcType="BIGINT" property="categoryId" />
		<result column="categoryName" jdbcType="VARCHAR" property="categoryName" />
		<result column="saleSpec" jdbcType="VARCHAR" property="saleSpec" />
		<result column="brandId" jdbcType="BIGINT" property="brandId" />
		<result column="brandName" jdbcType="VARCHAR" property="brandName" />
		<result column="textture" jdbcType="VARCHAR" property="textture" />
		<result column="originArea" jdbcType="VARCHAR" property="originArea" />
		<result column="saleUnit" jdbcType="VARCHAR" property="saleUnit" />
		<result column="nweight" jdbcType="REAL" property="nweight" />
		<result column="qaDays" jdbcType="INTEGER" property="qaDays" />
		<result column="waterDamage" jdbcType="DECIMAL" property="waterDamage" />
		<result column="lowTemp" jdbcType="REAL" property="lowTemp" />
		<result column="highTemp" jdbcType="REAL" property="highTemp" />
		<result column="inputTax" jdbcType="DECIMAL" property="inputTax" />
		<result column="rweight" jdbcType="REAL" property="rweight" />
		<result column="longScale" jdbcType="REAL" property="longScale" />
		<result column="wideScale" jdbcType="REAL" property="wideScale" />
		<result column="highScale" jdbcType="REAL" property="highScale" />
		<result column="outputTax" jdbcType="DECIMAL" property="outputTax" />
		<result column="timeSdate" jdbcType="TIMESTAMP" property="timeSdate" />
		<result column="timeEdate" jdbcType="TIMESTAMP" property="timeEdate" />
		<result column="goodsGrade" jdbcType="VARCHAR" property="goodsGrade" />
		<result column="priceGrade" jdbcType="INTEGER" property="priceGrade" />
		<result column="goodsColor" jdbcType="VARCHAR" property="goodsColor" />
		<result column="goodsSize" jdbcType="VARCHAR" property="goodsSize" />
		<result column="manuFacture" jdbcType="VARCHAR" property="manuFacture" />
		<result column="orderSpec" jdbcType="VARCHAR" property="orderSpec" />
		<result column="orderUnit" jdbcType="VARCHAR" property="orderUnit" />
		<result column="handinFlag" jdbcType="INTEGER" property="handinFlag" />
		<result column="handinDate" jdbcType="TIMESTAMP" property="handinDate" />
		<result column="qaDaysUnit" jdbcType="INTEGER" property="qaDaysUnit" />
		<result column="planTrySaleDays" jdbcType="INTEGER" property="planTrySaleDays" />
		<result column="planTrySaleValue" jdbcType="DECIMAL" property="planTrySaleValue" />
		<result column="isPercious" jdbcType="INTEGER" property="isPercious" />
		<result column="isService" jdbcType="INTEGER" property="isService" />
		<result column="planTrySaleQty" jdbcType="INTEGER" property="planTrySaleQty" />
		<result column="inPerson" jdbcType="VARCHAR" property="inPerson" />
		<result column="primeCost" jdbcType="DECIMAL" property="primeCost" />
		<result column="refPrice" jdbcType="DECIMAL" property="refPrice" />
		<result column="memberPrice" jdbcType="DECIMAL" property="memberPrice" />
		<result column="priceLevel" jdbcType="INTEGER" property="priceLevel" />
		<result column="priceLevelName" jdbcType="VARCHAR" property="priceLevelName" />
		<result column="maxSafeStock" jdbcType="INTEGER" property="maxSafeStock" />
		<result column="minSafeStock" jdbcType="INTEGER" property="minSafeStock" />
		<result column="dailySales" jdbcType="INTEGER" property="dailySales" />
		<result column="goodsFromStatus" jdbcType="INTEGER" property="goodsFromStatus" />
		<result column="coldTransFlag" jdbcType="BIT" property="coldTransFlag" />
		<result column="goodsTypeId" jdbcType="INTEGER" property="goodsTypeId" />
		<result column="goodsTypeName" jdbcType="VARCHAR" property="goodsTypeName" />
		<result column="weightType" jdbcType="INTEGER" property="weightType" />
		<result column="weightTypeName" jdbcType="VARCHAR" property="weightTypeName" />
		<result column="regionId" jdbcType="BIGINT" property="regionId" />
		<result column="goodsClass" jdbcType="INTEGER" property="goodsClass" />
		<result column="goodsClassName" jdbcType="VARCHAR" property="goodsClassName" />
		<result column="season" jdbcType="VARCHAR" property="season" />
		<result column="serviceType" jdbcType="INTEGER" property="serviceType" />
		<result column="serviceTypeName" jdbcType="VARCHAR" property="serviceTypeName" />
		<result column="minDiscount" jdbcType="REAL" property="minDiscount" />
		<result column="goodsStatus" jdbcType="INTEGER" property="goodsStatus" />
		<result column="erpCode" jdbcType="VARCHAR" property="erpCode" />
		<result column="erpName" jdbcType="VARCHAR" property="erpName" />
		<result column="vid" jdbcType="BIGINT" property="vid" />
		<result column="vendersName" jdbcType="VARCHAR" property="vendersName" />
		<result column="venderName" jdbcType="VARCHAR" property="venderName" />
		<result column="stepDiff" jdbcType="VARCHAR" property="stepDiff" />
		<result column="sortLevel" jdbcType="INTEGER" property="sortLevel" />
		<result column="sortLevelName" jdbcType="VARCHAR" property="sortLevelName" />
		<result column="lang" jdbcType="VARCHAR" property="lang" />
		<result column="creator" jdbcType="VARCHAR" property="creator" />
		<result column="createDate" jdbcType="TIMESTAMP" property="createDate" />
		<result column="modifier" jdbcType="VARCHAR" property="modifier" />
		<result column="updateDate" jdbcType="TIMESTAMP" property="updateDate" />
		<result column="goodsDesc" jdbcType="LONGVARCHAR" property="goodsDesc" />
		<result column="guadid" jdbcType="BIGINT" property="guadid" />
		
		<!-- <collection property="categoryProperty" ofType="com.efuture.omdmain.model.CategoryPropertyModel" >
			<id column="cpmid" jdbcType="BIGINT" property="cpmid" />
		    <result column="entId" jdbcType="BIGINT" property="entId" />
		    <result column="erpCode" jdbcType="VARCHAR" property="erpCode" />
		    <result column="categoryId" jdbcType="BIGINT" property="categoryId" />
		    <result column="categoryCode" jdbcType="VARCHAR" property="categoryCode" />
		    <result column="propertyCode" jdbcType="VARCHAR" property="propertyCode" />
		    <result column="propertyName" jdbcType="VARCHAR" property="propertyName" />
		    <result column="propertyDesc" jdbcType="VARCHAR" property="propertyDesc" />
		    <result column="remark" jdbcType="VARCHAR" property="remark" />
		    <result column="generatesFlag" jdbcType="BIT" property="generatesFlag" />
		    <result column="status" jdbcType="SMALLINT" property="status" />
		    <result column="lang" jdbcType="VARCHAR" property="lang" />
		    <result column="creator" jdbcType="VARCHAR" property="creator" />
		    <result column="createDate" jdbcType="TIMESTAMP" property="createDate" />
		    <result column="modifier" jdbcType="VARCHAR" property="modifier" />
		    <result column="updateDate" jdbcType="TIMESTAMP" property="updateDate" />
		</collection> -->
		<!-- <collection property="categoryPropertyList" ofType="com.efuture.omdmain.model.CategoryPropertyModel" column="categoryId"
                    select="beanmapper.CategoryPropertyModelMapper.queryCategoryPropertys">
        </collection> -->
        <association property="categoryProperty" column="categoryId" select="beanmapper.CategoryPropertyModelMapper.queryCategoryPropertys"/> 
	</resultMap>
	
	<!-- 打印副单-查询 -->
	<select id="querySaleGoodsAndProperty" parameterType="map" resultMap="BaseResultMap">
	SELECT t.* FROM salegoods t
	<where>
		<if test="shopId != null">
		t.shopId IN 
			<foreach collection="shopId" index="index" item="item" open="(" separator="," close=")">
	              #{item}       
	       	</foreach>
	    </if>
		<if test="goodsCode != null">
			AND t.goodsCode = #{goodsCode}
		</if>
		<if test="goodsName != null">
			AND t.goodsName like CONCAT('%',#{goodsName},'%')
		</if>
		<if test="categoryId != null">
			AND t.categoryId IN
			 <foreach collection="categoryId" index="index" item="item" open="(" separator="," close=")">
               #{item}       
        	</foreach>  
		</if>
		<if test="brandId != null">
			AND t.brandId = #{brandId}
		</if>
		<if test="entId  != null">
			AND t.entId  = #{entId}
		</if>
		<if test="page_no != null and page_size != null">
			limit ${page_no},${page_size}
		</if>
		</where>
	</select>
	
	<!-- 打印副单-查询 -->
	<select id="countSaleGoodsAndProperty" parameterType="map" resultType="long">
	SELECT count(1) FROM salegoods t
	<where>
		<if test="shopId != null">
		t.shopId IN 
			<foreach collection="shopId" index="index" item="item" open="(" separator="," close=")">
	              #{item}       
	       	</foreach>
	    </if>
		<if test="goodsCode != null">
			AND t.goodsCode = #{goodsCode}
		</if>
		<if test="goodsName != null">
			AND t.goodsName like CONCAT('%',#{goodsName},'%')
		</if>
		<if test="categoryId != null">
			AND t.categoryId IN
			 <foreach collection="categoryId" index="index" item="item" open="(" separator="," close=")">
               #{item}       
        	</foreach>  
		</if>
		<if test="brandId != null">
			AND t.brandId = #{brandId}
		</if>
		<if test="entId  != null">
			AND t.entId  = #{entId}
		</if>
		</where>
	</select>
	
</mapper>