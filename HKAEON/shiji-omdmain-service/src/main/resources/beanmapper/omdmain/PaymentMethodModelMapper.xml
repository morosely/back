<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="beanmapper.PaymentMethodModelMapper">
  <resultMap id="BaseResultMap" type="com.efuture.omdmain.model.PaymentMethodModel">
    <!--
      WARNING - @mbg.generated
    -->
    <id column="pmid" jdbcType="BIGINT" property="pmid" />
    <result column="entId" jdbcType="BIGINT" property="entId" />
    <result column="parentId" jdbcType="BIGINT" property="parentId" />
    <result column="parentCode" jdbcType="VARCHAR" property="parentCode" />
    <result column="payLevel" jdbcType="INTEGER" property="payLevel" />
    <result column="payType" jdbcType="VARCHAR" property="payType" />
    <result column="cardPayType" jdbcType="VARCHAR" property="cardPayType" />
    <result column="virtualPayType" jdbcType="SMALLINT" property="virtualPayType" />
    <result column="payCode" jdbcType="VARCHAR" property="payCode" />
    <result column="paySCode" jdbcType="VARCHAR" property="paySCode" />
    <result column="payName" jdbcType="VARCHAR" property="payName" />
    <result column="payPattern" jdbcType="VARCHAR" property="payPattern" />
    <result column="currencyFlag" jdbcType="VARCHAR" property="currencyFlag" />
    <result column="currencyCode" jdbcType="VARCHAR" property="currencyCode" />
    <result column="rate" jdbcType="DOUBLE" property="rate" />
    <result column="changeRate" jdbcType="DOUBLE" property="changeRate" />
    <result column="minAmount" jdbcType="DECIMAL" property="minAmount" />
    <result column="maxAmount" jdbcType="DECIMAL" property="maxAmount" />
    <result column="roundType" jdbcType="VARCHAR" property="roundType" />
    <result column="roundPrecision" jdbcType="REAL" property="roundPrecision" />
    <result column="overflowFlag" jdbcType="BIT" property="overflowFlag" />
    <result column="changeFlag" jdbcType="BIT" property="changeFlag" />
    <result column="recordFlag" jdbcType="BIT" property="recordFlag" />
    <result column="invoiceFlag" jdbcType="BIT" property="invoiceFlag" />
    <result column="status" jdbcType="SMALLINT" property="status" />
    <result column="netvalueFlag" jdbcType="BIT" property="netvalueFlag" />
    <result column="returnPayFlag" jdbcType="BIT" property="returnPayFlag" />
    <result column="payRemark" jdbcType="VARCHAR" property="payRemark" />
    <result column="level" jdbcType="SMALLINT" property="level" />
    <result column="leafFlag" jdbcType="BIT" property="leafFlag" />
    <result column="lang" jdbcType="VARCHAR" property="lang" />
    <result column="creator" jdbcType="VARCHAR" property="creator" />
    <result column="createDate" jdbcType="TIMESTAMP" property="createDate" />
    <result column="modifier" jdbcType="VARCHAR" property="modifier" />
    <result column="updateDate" jdbcType="TIMESTAMP" property="updateDate" />
  </resultMap>


  <!--按条件查询支付方式关系表 -->
  <select id="getErpPaymethod" parameterType="map" resultType="map">
      SELECT
      a.payCode,
      a.payName,
      b.payName AS payNameRef,
      b.paymentModeId,
      b.paymentModeName,
      b.remark,
      a.creditsFalg
      FROM
      paymentmethod a
      inner JOIN paymentmethodref b ON a.pmid = b.pmid
      WHERE
      a.STATUS = '1'
      AND a.leafFlag = '1'
      <if test="paymentModeId != null">
       AND b.paymentModeId = #{paymentModeId}
      </if>
  </select>

    <!--按条件查询支付方式关系表 -->
    <select id="posGetPaymethod" parameterType="map" resultType="map">
        SELECT
        a.payCode,
        a.payName,
        b.paymentModeId,
        b.paymentModeName
        FROM
        paymentmethod a
        inner JOIN paymentmethodref b ON a.pmid = b.pmid
        WHERE
        a.STATUS = '1'
        AND a.leafFlag = '1'
    </select>
</mapper>


